(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(15),o=t.n(a),c=t(6),r=t(3),i=t(1),u=t(0),s=function(e){return Object(u.jsxs)("form",{children:["filter:",Object(u.jsx)("input",{value:e.filterTerm,onChange:e.handleFilterTermChange})]})},l=function(e){return Object(u.jsxs)("form",{onSubmit:e.addPerson,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:e.newPersonName,onChange:e.handleNameChange})]}),Object(u.jsxs)("div",{children:["phone:",Object(u.jsx)("input",{value:e.newPersonPhone,onChange:e.handlePhoneChange})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.person,t=e.deletePerson;return Object(u.jsxs)("p",{className:"person",children:[n.name,": ",n.number,Object(u.jsx)("button",{onClick:t,children:"delete"})]})},f=function(e){return e.personsToDisplay.map((function(n){return Object(u.jsx)(d,{person:n,deletePerson:function(){return e.deletePerson(n.id)}},n.name)}))},j=function(e){var n=e.message,t=e.className;return null===n?null:Object(u.jsx)("div",{className:t,children:n})},h=t(4),b=t.n(h),m="/api/persons",O=function(){return b.a.get(m)},p=function(e){return b.a.post(m,e)},v=function(e,n){return b.a.put("".concat(m,"/").concat(e),n)},x=function(e){return console.log("deleting ".concat(m,"/").concat(e)),b.a.delete("".concat(m,"/").concat(e))},g=function(e){var n=Object(i.useState)([]),t=Object(r.a)(n,2),a=t[0],o=t[1],d=Object(i.useState)(""),h=Object(r.a)(d,2),b=h[0],m=h[1],g=Object(i.useState)(""),P=Object(r.a)(g,2),w=P[0],C=P[1],N=Object(i.useState)(""),T=Object(r.a)(N,2),k=T[0],y=T[1],S=Object(i.useState)(null),D=Object(r.a)(S,2),F=D[0],E=D[1],J=Object(i.useState)("notification"),L=Object(r.a)(J,2),B=L[0],I=L[1];Object(i.useEffect)((function(){O().then((function(e){o(e.data)}))}),[]);var R=a.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())})),q=function(e,n){E(e),I(n),setTimeout((function(){E(null)}),5e3)};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(j,{message:F,className:B}),Object(u.jsx)(l,{addPerson:function(e){e.preventDefault();var n={name:b,number:w};if(""!==b)if(a.map((function(e){return e.name})).includes(b)){if(window.confirm("".concat(b," is already added to the phonebook. Replace the number with a new one?"))){var t=a.find((function(e){return e.name===b})),r=Object(c.a)(Object(c.a)({},t),{},{number:w});v(t.id,r).then((function(e){o(a.map((function(n){return n.id!==t.id?n:e.data})));var n="".concat(t.name," updated");q(n,"notification")})).catch((function(e){var n="".concat(t.name," was already removed from phonebook");q(n,"error-notification"),o(a.filter((function(e){return e.id!==t.id})))}))}}else p(n).then((function(e){o(a.concat(e.data));var t="".concat(n.name," added to phonebook");q(t,"notification")}));m(""),C("")},newPersonName:b,newPersonPhone:w,handleNameChange:function(e){m(e.target.value)},handlePhoneChange:function(e){C(e.target.value)}}),Object(u.jsx)("h2",{children:"Phone Numbers"}),Object(u.jsx)(s,{filterTerm:k,handleFilterTermChange:function(e){y(e.target.value),console.log(k)},personsToDisplay:R}),Object(u.jsx)(f,{personsToDisplay:R,deletePerson:function(e){var n=a.find((function(n){return n.id===e}));if(window.confirm("Delete ".concat(n.name,"?"))){x(n.id).then(o(a.filter((function(n){return n.id!==e}))));var t="".concat(n.name," deleted");q(t,"notification")}}})]})};t(39);o.a.render(Object(u.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.92144f8b.chunk.js.map